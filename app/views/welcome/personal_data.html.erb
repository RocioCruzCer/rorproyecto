<div class="form-section">
  <!-- Mensaje de éxito (mostrado con flash) -->
  <% if flash[:success] %>
    <div class="success-message active">
      <h3><i class="fas fa-check-circle"></i> ¡Registro Guardado!</h3>
      <p><%= flash[:success] %></p>
      <p><small>Nota: Los datos no se almacenan en base de datos, solo se muestran para demostración.</small></p>
    </div>
  <% end %>
  
  <h2 class="form-title">
    <i class="fas fa-user-edit"></i> Formulario de Datos Personales
  </h2>
  <p class="form-subtitle">
    Complete todos los campos del formulario. Los campos marcados con <span class="required">*</span> son obligatorios.
  </p>
  
  <%= form_tag save_personal_data_path, method: :post, id: "personalDataForm" do %>
    <div class="form-grid">
      <!-- Información Personal -->
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-user"></i> Nombre Completo <span class="required">*</span>
        </label>
        <%= text_field_tag :full_name, nil, class: "form-input", required: true, placeholder: "Ingrese su nombre completo" %>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-id-card"></i> CURP <span class="required">*</span>
        </label>
        <%= text_field_tag :document_id, nil, class: "form-input", required: true, placeholder: "Número de identificación" %>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-birthday-cake"></i> Fecha de Nacimiento <span class="required">*</span>
        </label>
        <%= date_field_tag :birth_date, nil, class: "form-input", required: true %>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-venus-mars"></i> Género <span class="required">*</span>
        </label>
        <%= select_tag :gender, options_for_select([
          ["Seleccione una opción", ""],
          ["Masculino", "masculino"],
          ["Femenino", "femenino"],
          ["Otro", "otro"],
          ["Prefiero no decir", "prefiero-no-decir"]
        ]), class: "form-select", required: true %>
      </div>
      
      <!-- Información de Contacto -->
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-envelope"></i> Correo Electrónico <span class="required">*</span>
        </label>
        <%= email_field_tag :email, nil, class: "form-input", required: true, placeholder: "ejemplo@correo.com" %>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-phone"></i> Teléfono <span class="required">*</span>
        </label>
        <%= telephone_field_tag :phone, nil, class: "form-input", required: true, placeholder: "Número de teléfono" %>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-map-marker-alt"></i> Dirección <span class="required">*</span>
        </label>
        <%= text_field_tag :address, nil, class: "form-input", required: true, placeholder: "Dirección completa" %>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-city"></i> Ciudad
        </label>
        <%= text_field_tag :city, nil, class: "form-input", placeholder: "Ciudad de residencia" %>
      </div>
      
      <!-- Información Adicional -->
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-graduation-cap"></i> Nivel de Educación
        </label>
        <%= select_tag :education, options_for_select([
          ["Seleccione una opción", ""],
          ["Primaria", "primaria"],
          ["Secundaria", "secundaria"],
          ["Técnico", "tecnico"],
          ["Universitario", "universitario"],
          ["Posgrado", "posgrado"]
        ]), class: "form-select" %>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-briefcase"></i> Ocupación
        </label>
        <%= text_field_tag :occupation, nil, class: "form-input", placeholder: "Su profesión u oficio" %>
      </div>
      
      <div class="form-group">
        <label class="form-label">
          <i class="fas fa-heart"></i> Estado Civil
        </label>
        <%= select_tag :marital_status, options_for_select([
          ["Seleccione una opción", ""],
          ["Soltero(a)", "soltero"],
          ["Casado(a)", "casado"],
          ["Divorciado(a)", "divorciado"],
          ["Viudo(a)", "viudo"],
          ["Unión Libre", "union-libre"]
        ]), class: "form-select" %>
      </div>
      
      <!-- Campo de texto grande -->
      <div class="form-group" style="grid-column: span 2;">
        <label class="form-label">
          <i class="fas fa-comment-alt"></i> Información Adicional
        </label>
        <%= text_area_tag :additional_info, nil, class: "form-textarea", 
                          placeholder: "Escriba aquí cualquier información adicional que considere importante...", 
                          rows: 4 %>
      </div>
      
      <!-- Checkbox de términos y condiciones -->
      <div class="form-group" style="grid-column: span 2;">
        <div class="checkbox-group">
          <%= check_box_tag :terms, "1", false, required: true %>
          <label for="terms">Acepto los términos y condiciones del tratamiento de datos personales <span class="required">*</span></label>
        </div>
      </div>
    </div>
    
    <!-- Botones de acción -->
    <div class="form-actions">
      <%= button_tag type: "submit", class: "btn-submit" do %>
        <i class="fas fa-save"></i> Guardar Registro
      <% end %>
      
      <button type="button" class="btn-reset" onclick="resetForm()">
        <i class="fas fa-undo"></i> Limpiar Formulario
      </button>
    </div>
  <% end %>
</div>

<style>
  /* ESTILOS PARA EL FORMULARIO DE DATOS PERSONALES */
  .form-section {
    background: #FFFFFF;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(11, 93, 59, 0.08);
    margin: 20px 0;
    border: 1px solid #E4DDC9;
  }
  
  .form-title {
    color: #0B5D3B;
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  
  .form-title i {
    color: #E0B100;
  }
  
  .form-subtitle {
    color: #6F8F7A;
    font-size: 16px;
    margin-bottom: 25px;
    line-height: 1.5;
  }
  
  .form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }
  
  .form-group {
    display: flex;
    flex-direction: column;
  }
  
  .form-label {
    color: #2F2F2A;
    font-weight: 500;
    margin-bottom: 8px;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .form-label i {
    color: #0B5D3B;
    font-size: 12px;
  }
  
  .required {
    color: #e74c3c;
    font-weight: bold;
    margin-left: 2px;
  }
  
  .form-input,
  .form-select,
  .form-textarea {
    padding: 12px 16px;
    border: 2px solid #E4DDC9;
    border-radius: 10px;
    font-family: 'Inter', sans-serif;
    font-size: 15px;
    transition: all 0.3s ease;
    background-color: #FAF5E9;
  }
  
  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    outline: none;
    border-color: #0B5D3B;
    box-shadow: 0 0 0 3px rgba(11, 93, 59, 0.1);
    background-color: #FFFFFF;
  }
  
  .form-textarea {
    min-height: 120px;
    resize: vertical;
  }
  
  .checkbox-group {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 5px;
  }
  
  .checkbox-group input[type="checkbox"] {
    width: 18px;
    height: 18px;
    accent-color: #0B5D3B;
  }
  
  .checkbox-group label {
    color: #2F2F2A;
    font-size: 14px;
    cursor: pointer;
  }
  
  .form-actions {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #E4DDC9;
  }
  
  .btn-submit {
    background: linear-gradient(135deg, #0B5D3B 0%, #0A4D32 100%);
    color: #FFFFFF;
    border: none;
    padding: 14px 32px;
    border-radius: 10px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(11, 93, 59, 0.3);
  }
  
  .btn-submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(11, 93, 59, 0.4);
  }
  
  .btn-submit:active {
    transform: translateY(0);
  }
  
  .btn-reset {
    background: #E4DDC9;
    color: #2F2F2A;
    border: none;
    padding: 14px 24px;
    border-radius: 10px;
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s ease;
  }
  
  .btn-reset:hover {
    background: #D4CDB9;
    transform: translateY(-2px);
  }
  
  /* Mensaje de confirmación */
  .success-message {
    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
    border: 2px solid #155724;
    color: #155724;
    padding: 20px;
    border-radius: 10px;
    margin: 0 0 30px 0;
    animation: fadeIn 0.5s ease;
    text-align: center;
  }
  
  .success-message.active {
    display: block;
  }
  
  .success-message h3 {
    font-size: 20px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }
  
  .success-message p {
    font-size: 16px;
    line-height: 1.5;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Responsive para el formulario */
  @media (max-width: 768px) {
    .form-section {
      padding: 20px;
    }
    
    .form-title {
      font-size: 20px;
    }
    
    .form-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .form-group[style*="grid-column: span 2"] {
      grid-column: span 1 !important;
    }
    
    .form-actions {
      flex-direction: column;
    }
    
    .btn-submit,
    .btn-reset {
      width: 100%;
      justify-content: center;
    }
  }
</style>

<script>
  // Función para resetear el formulario
  function resetForm() {
    document.getElementById('personalDataForm').reset();
  }
  
  // Establecer fecha máxima para fecha de nacimiento (hoy)
  document.addEventListener('DOMContentLoaded', function() {
    const today = new Date().toISOString().split('T')[0];
    const birthDateField = document.getElementById('birth_date');
    if (birthDateField) {
      birthDateField.max = today;
    }
    
    // Actualizar breadcrumb para esta página
    updateBreadcrumb('Datos Personales', 'fa-user-circle');
  });
</script>